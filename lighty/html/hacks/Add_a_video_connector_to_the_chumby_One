<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" dir="ltr">
<head>
<title>Add a video connector to the chumby One - ChumbyWiki</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="MediaWiki 1.16.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ChumbyWiki (en)" />
<link rel="alternate" type="application/atom+xml" title="ChumbyWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="/skins/common/shared.css?270" media="screen" />
<link rel="stylesheet" href="/skins/common/commonPrint.css?270" media="print" />
<link rel="stylesheet" href="/skins/monobook/main.css?270" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" />
<link rel="stylesheet" href="/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" />
<script>
var skin="monobook",
stylepath="/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/index.php/$1",
wgScriptPath="",
wgScriptExtension=".php",
wgScript="/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://wiki.chumby.com",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="Add_a_video_connector_to_the_chumby_One",
wgTitle="Add a video connector to the chumby One",
wgAction="view",
wgArticleId=1416,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=2580,
wgVersion="1.16.2",
wgEnableAPI=false,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "ChumbyWiki", "5": "ChumbyWiki talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "chumbywiki": 4, "chumbywiki_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "image": 6, "image_talk": 7},
wgSiteName="ChumbyWiki",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script><script src="/skins/common/wikibits.js?270"></script>
<script src="/skins/common/ajax.js?270"></script>
<script src="/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook&amp;270"></script>

</head>
<body class="mediawiki ltr ns-0 ns-subject page-Add_a_video_connector_to_the_chumby_One skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content" >
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">Add a video connector to the chumby One</h1>
	<div id="bodyContent">
		<h3 id="siteSub">From ChumbyWiki</h3>
		<div id="contentSub"></div>
		<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
		<!-- start content -->
<h1> <span class="mw-headline" id="Hardware">Hardware</span></h1>
<p>Buy an RCA extender cable, with at least one male end. Cut to the length you desire the pigtail to be. Typically, you want to use the male plug half because your video equipment will have a female jack, but of course this may vary depending on how strange your video equipment is.
</p><p>Take the cut end and strip the wire back, and solder according to the following diagram:
</p><p><img src="http://files.chumby.com/bunnie/add_video.jpg" alt="add_video.jpg" />
</p><p>Also, in theory, you're supposed to put a 50 pF capacitor across the video output point to ground. You can do this fairly easy using a leaded device, but things will probably work okay with out it. You may just get some aliasing on your video output without the filter.
</p><p>To access this part of the circuit board, you actually do not need to remove any screws. If you are very careful, you can use a flathead screwdriver and insert it into the gap between the front bezel and the bottom plastic, and pry the bottom plastic up. You'll have to work it up by gapping the plastic at both ends of the seam between the front bezel and the bottom plastic, since there are two friction locks on either end of the seam. The piece just snaps into place, there are no screws that hold it down. If you're not careful, the worst you will do is break the retaining tab on the bottom plastic, which means that your battery compartment won't be held snugly in place when you put it back together again.
</p>
<h1> <span class="mw-headline" id="Firmware">Firmware</span></h1>
<p>You'll need to mod the firmware to activate the video out (lifted from <a href="http://forum.chumby.com/viewtopic.php?pid=24185" class="external text" rel="nofollow">the chumby forum</a>):
</p><p>The CPU used in the chumby One has a lot of stuff on the die.  Including a composite-out TV encoder, which while not connected by default, is not hard to get access to at all.  Today, bunnie posted instructions on how to add a video connector.  He noted that modding the firmware is an "exercise to the reader".  Well, I do enjoy exercises wink
</p><p>You need to do three things, and you too can have Pandora on your TV!
</p>
<pre>   * Perform the video hardware mod
   * Install new kernel (using the scripts below)
   * Switch video modes (using switch_output)
</pre>
<p>I'm hoping the new kernel will make it into a future firmware release, but for now you'll have to install one yourself.
</p><p>The utility to switch modes just does an ioctl() on one of the framebuffer devices to set the resolution to 720x480x32.  This should automatically enable TV mode.  If you're in a PAL country, it's a slightly different resolution, but the call ought to be the same.  I have a small program that just does this.
</p><p>Unfortunately, there isn't any hardware support for image-scaling, so I need to run the flashplayer at 720x480.  Fortunately, while the TV encoder wants video in 32-bit, there is a colorspace converter that everything goes through, so a recompiled flashplayer isn't required.
</p><p>Another drawback is that it doesn't appear possible to drive the LCD and the TV at the same time.  As a result, the LCD goes into a "self-test" mode and just continuously draws a red/green/blue/black/white sequence.
</p><p>Because of this, you pretty much have to use the touchscreen blind.  Fortunately, you don't have to recalibrate it, so it shouldn't be too difficult to navigate.
</p><p>Note that this is only composite video.  There's no component or digital video circuitry onboard.
</p><p>Also, because it's pushing a whole lot more pixels, it's going to run widgets slower.  Still, pong-clock-on-TV is always cool.
</p><p>I've posted the kernel on files.chumby.com.  You can use this script to download and install it.
</p>
<pre>
#!/bin/sh
KRN=krnB
if grep -q mmcblk0p2 /proc/cmdline; then KRN=krnA; fi
cd /mnt/storage
rm -f c1-k1-video switch_output
wget http://files.chumby.com/hacks/c1-k1-video
wget http://files.chumby.com/hacks/switch_output
chmod a+x switch_output
if [ &quot;$(md5sum c1-k1-video | awk '{print $1}')&quot;&nbsp;!= &quot;932523d6458abdfc2e7546bcb1c49587&quot; ]
then
    echo &quot;MD5 error.  Cannot continue.&quot;
    exit
fi
config_util --cmd=putblock --dev=/dev/mmcblk0p1 --block=${KRN} &lt; /mnt/storage/c1-k1-video
echo &quot;Kernel updated.  Reboot to use it.&quot;
</pre>
<p>Put this into a script and run it, then reboot.
</p><p>Hook up a TV, then connect via SSH.  Run the following commands to switch to NTSC and restart the flashplayer:
</p>
<pre>
stop_control_panel
/mnt/storage/switch_output -n
chumbyflashplayer.x -x 720 -y 480 -i /tmp/controlpanel.swf
</pre>
<p>Files.  The following files are relevant in case you want to dig deeper.  Note that I did need to modify arch/arm/mach-stmp378x/include/mach/memory. to define CONSISTENT_DMA_SIZE as SZ_8M to be able to allocate the additional screen size.  If you're playing around with it and your screen boots up all white, you've probably run out of DMA memory and need to up this value.
</p>
<pre>   * <a href="http://files.chumby.com/hacks/chumbyfbfw.tv.c" class="external text" rel="nofollow">chumbyfbfw.c</a>
   * <a href="http://files.chumby.com/hacks/c1-k1-video" class="external text" rel="nofollow">new kernel</a>
   * <a href="http://files.chumby.com/hacks/switch_output" class="external text" rel="nofollow">switch_output binary</a>
   * <a href="http://files.chumby.com/hacks/switch_output.c" class="external text" rel="nofollow">switch_output source</a>
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 12/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key chumby_wiki:pcache:idhash:1416-0!1!0!!en!2!edit=0 and timestamp 20120424233730 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.chumby.com/index.php/Add_a_video_connector_to_the_chumby_One">http://wiki.chumby.com/index.php/Add_a_video_connector_to_the_chumby_One</a>"</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/index.php/Add_a_video_connector_to_the_chumby_One" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/index.php?title=Talk:Add_a_video_connector_to_the_chumby_One&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource"><a href="/index.php?title=Add_a_video_connector_to_the_chumby_One&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="/index.php?title=Add_a_video_connector_to_the_chumby_One&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Add_a_video_connector_to_the_chumby_One" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/chumby_logo.gif);" href="/index.php/Main_Page" title="Visit the main page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="/index.php/ChumbyWiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="/index.php/ChumbyWiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="/index.php/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="/index.php/Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" title="Search ChumbyWiki" accesskey="f" type="search" name="search" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/index.php/Special:WhatLinksHere/Add_a_video_connector_to_the_chumby_One" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/index.php/Special:RecentChangesLinked/Add_a_video_connector_to_the_chumby_One" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="/index.php/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=Add_a_video_connector_to_the_chumby_One&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/index.php?title=Add_a_video_connector_to_the_chumby_One&amp;oldid=2580" title="Permanent link to this revision of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 7 December 2009, at 08:05.</li>
		<li id="viewcount">This page has been accessed 8,589 times.</li>
		<li id="privacy"><a href="/index.php/ChumbyWiki:Privacy_policy" title="ChumbyWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="/index.php/ChumbyWiki:About" title="ChumbyWiki:About">About ChumbyWiki</a></li>
		<li id="disclaimer"><a href="/index.php/ChumbyWiki:General_disclaimer" title="ChumbyWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-2716638-12");
pageTracker._initData();
pageTracker._trackPageview();
</script><!-- Served in 0.528 secs. --></body></html>
